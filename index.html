<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>IT Ticket Prediction</title>

	<!---Bootstrap CDN-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">




	<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">


</head>

<body>
	<div class="container">
		<div class="row ">
			<div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
				<div class="card card-signin my-5 bg-white mb-3">
					<h5 class="card-header text-center">IT Ticket Prediction</h5>
					<div class="card-body">
						<form class="form-signin" id="formLogin">
							<div class="form-group">
								<input type="text" id="Short Description" class="form-control"
									placeholder="Short Description" required>
							</div>
							<div class="form-group">
								<input type="text" id="Additional Commment" class="form-control"
									placeholder="Additional Commment">
							</div>
							<button class="btn btn-primary btn-block text-uppercase" value="Submit" id="submit"
								type="submit">Submit</button>
						</form>
						<div id="Category">Category: </div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	<script>
		document.getElementById("formLogin").addEventListener("submit", login);
		async function login(e) {
			e.preventDefault();
			let shortDescription = document.getElementById("Short Description");
			let additionalComment = document.getElementById("Additional Commment");
			let category = document.getElementById("Category");
			let url = "http://127.0.0.1:9000/";
			console.log(shortDescription.value);
			data = await postData(url, { text: `${shortDescription.value} ${additionalComment.value}` })
			category.innerText = `Category: ${data.result}`;
		}

		async function postData(url = '', data = {}) {
			// Default options are marked with *
			const response = await fetch(url, {
				method: 'POST', // *GET, POST, PUT, DELETE, etc.
				headers: {
					'Content-Type': 'application/json'
					// 'Content-Type': 'application/x-www-form-urlencoded',
				},
				body: JSON.stringify(data) // body data type must match "Content-Type" header
			});
			return await response.json(); // parses JSON response into native JavaScript objects
		}

	</script>
</body>

</html>